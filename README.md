# soft-and-hard
《软硬结合——写给硬件开发工程师的全栈入门实战》，软硬件结合可以说是所有硬件开发人员心中的一大追求，当一个人技能树上点亮了软硬件，所有创意想法基本都能靠自己去实现。整个教程与源码都是免费公开的，但不允许别人通过这教程赚钱，我就赚个人气~ __请在github上给我一个关注的星星以示支持__

## 暂缓更新公告
由于此免费教程关注的星星数量太少，感觉没什么人看所以决定暂缓更新，如果关注的星星数上来了我再继续更新。  
暂时只在这里把整个思路给出来，供动手能力比较强的读者参考。  
demo1已经把基本流程打通，软硬件正常通信。  

硬件：
每一个设备都应该有一个独一无二的id，以保证能监控到要监控的设备。一般是建立连接时会传输自己的id给服务器。
不管硬件本身问题还是网络问题都存在一定的不可避免，所以要有断开时也能不断重连接的能力。
发送心跳，让服务器知道这个设备是在线的。

服务器:
做好日志记录，以方便调试，同时要注意及时删除旧的日志以防止把磁盘撑爆了。
可以提供一个API，第三方用这个API监控整个服务是否正常，当服务出现异常无法运行时能够及时通知。
物联网由于是大量数据，所以非关系型数据库相对较好。（即用Mongodb比用MySQL要好）。

协议：
由于需要控制，所以硬件与服务器之间如果用http协议的话，只能用轮询的方法，性能极差，浪费资源极高。
流量有限的场景一般会自定义tcp协议或用NB-IOT，设计时要考虑扩展性，可以了解一下TLV格式（type length value）。当年我调试NB-IOT时，人家设计的平台用的就是TLV格式。
其次是推荐MQTT协议，拥有较好的扩展性。
要研究协议可以抓包分析。

客户端：
微信小程序要走https，所以需要购买域名并做域名备案且购买证书（证书有免费的，我是用nignx把证书挂上去的）

调试工具：
由于物联网项目涉及到大量环节，一旦出现问题时会难以调试。所以很有必要开发一个好用的调试工具以快速定位到底是硬件问题还是网络通信问题还是服务器问题。


### 向我咨询
如果你正在开发物联网项目，卡住了很迷茫，不知道怎么继续搞下去，需要向有经验的人咨询一下，可以来值乎付费咨询。大家都是脚踏实地的工程师，向我提问不会亏的，我回答不了的问题不收你钱，保证把你的迷茫扫空。
![值乎提问](http://ww1.sinaimg.cn/large/005BIQVbgy1ft1c0p6d4uj30e50idn0d.jpg)


## 起源
2017年毕业时做的毕业设计是一个物联网项目，硬件上是STM32+ESP8266，自己搭服务器（nodejs+mongodb），客户端做网站做微信小程序（我觉得我是第一个用微信小程序做毕设的人），打算将这个项目重构并写出教程，针对硬件开发人员写的全栈应用开发入门实战。2018年开始写这教程时，我的水平是不足一年工作经难的初级全栈工程师+ 略懂硬件开发。
由于整个教程在缓慢更新中，遇到任何疑惑欢迎进Q群交流提出：__638456092__。
## 如何开始
1. 在github上点击下载，并解压
![在github上下载](http://ww1.sinaimg.cn/large/005BIQVbgy1fsr38x82u2j31hc0t4adw.jpg)
2. 打开文件夹，点击`第一次阅读.html`，先从整体阅读整个教程的特点，先从整体了解思路。
3. Part1内容：点击`Part1/index.html`正式开始阅读，其它部分同理。

学习过git：
因为整个教程在不断更新中，进入文件并运行`git pull`即可更新。
![git clone示意](http://ww1.sinaimg.cn/large/005BIQVbgy1fqtnqg91l9g31h30rmu0z.gif)

## 教程目录 与 安排
章节 | 情况 | 备注
------------ | ------------- | -------------
Part1 | 基本完成 |
Part2 | 基本完成 |
Part3 | 基本完成 |有待优化
Part4 | 暂缓更新 | 
Part5 | 暂缓更新 | 
Part6 | 暂缓更新 | 

虽然整个教程没有完成，要点已经列出来，并不影响你们提前学习~
### Part1
整个项目介绍并让大家先简单地运行起来~ 包含ESP8622烧录固件，各环节自调与联调。
- 前提：有一定硬件调试经验（USART串口调试，AT指令）
- 目标：把Part1 的demo运行起来，实现本地WIFI下手机监控硬件。
- 关键词：STM32、串口调试、AT指令、ESP8266、git、网络调试助手
### Part2
讲解Part1 demo，包含静态网页制作，express框架。
- 目标：简单的网页开发与Nodejs应该能入门了，有能力修改出自己想要的页面效果。
- 关键词：HTML、Javascript、CSS、Jquery、bootstrap、w3cschool、菜鸟教程、《深入浅出nodejs》、《七天学会NodeJS》、TCP服务器、express
### Part3
将Part1 demo运行在云服务器上，主要是学习linux（ubuntu），云服务器各种折腾。
- 目标：Linux初步入门、部署到云服务器上，此时真正实现远程监控硬件。最后讨论一下demo1的不足，向demo2进化。
- 关键词：ubuntu、云服务器、vi、《鳥哥的 Linux 私房菜》、bash、Xshell、winSCP
### Part4
引入mongoDB数据库，将数据保存到数据库里，并将历史数据可视化。  
（可选学）并讲一些协议，包含TCP协议(讲一下基于TCP自定义自己的协议规则)，HTTP协议，websocket协议。然后会进行优化，如把HTTP轮询换成websocket协议。
- 目标：完成Part4 demo，数据可视化会让整个效果更炫，增加实时性，这个物联网项目基本成型。
- 关键词：《计算机网络》、tcpdump、wireshark、《TCP/IP详解》、socketio库、echart库、TLV格式
### Part5
Part5及往后看阅读情况写吧。
各种性能测试与优化，ESP8266的AT固件改成自己编译的固件（这个蛮难搞的），说一下各物联网平台。
- 关键词：redis、nginx、CDN
### Part6
使用electron开发PC桌面软件，使用cordova开发手机APP。开发微信小程序。
- 关键词：electron、cordova
### 这难吗？
![教程不难](http://ww1.sinaimg.cn/large/005BIQVbgy1fss6qz59w6j30jj0a2t9h.jpg)

## 声明
保留一切权利，禁止商业转载，非商业转载时必须保留此声明与网址：https://github.com/alwxkxk/soft-and-hard。


